(this.webpackJsonpjsplay=this.webpackJsonpjsplay||[]).push([[0],{154:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(49),c=n.n(l),o=(n(61),n(6)),s=n(28),i=n(4),u=n(56),d=n(157),f=n(50),j=n(26),h=n.n(j),m=n(12),g=n.n(m),b=n(13),x=n(2),v=function(e){var t=e.actions;return Object(x.jsxs)("aside",{className:"flex flex-col items-center bg-gray-800 text-gray-200 shadow h-full",children:[Object(x.jsx)("div",{className:"h-16 w-16 flex items-center ",children:Object(x.jsx)("a",{className:"h-6 w-6 mx-auto text-green-400",href:"/",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(x.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),Object(x.jsx)("div",{className:"h-16 flex items-center w-16 hover:bg-gray-600",children:Object(x.jsx)("button",{className:"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-600 hover:text-green-400 focus:outline-none",onClick:t.onRun,children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:Object(x.jsx)("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})})})}),Object(x.jsx)("div",{className:"h-16 flex items-center w-16 hover:bg-gray-600",children:Object(x.jsx)("button",{className:"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-600 hover:text-green-400 focus:outline-none",onClick:t.onImport,children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:Object(x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})}),Object(x.jsx)("div",{className:"h-16 flex items-center w-16 hover:bg-gray-600",children:Object(x.jsx)("button",{className:"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-600 hover:text-green-400 focus:outline-none",onClick:t.onExport,children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:Object(x.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})})}),Object(x.jsx)("div",{className:"h-16 flex items-center w-16 hover:bg-gray-600",children:Object(x.jsx)("button",{className:"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-600 hover:text-green-400 focus:outline-none",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:Object(x.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})})}),Object(x.jsx)("div",{className:"mt-auto h-16 flex items-center w-full",children:Object(x.jsx)("button",{className:"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-700 focus:outline-none",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:Object(x.jsx)("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z","clip-rule":"evenodd"})})})})]})},p=function(e){var t=e.createElement("script");return t.innerHTML="\n    const fakeConsole = {};\n    function formatArgs(args) {\n      return args\n        .map((arg) => {\n          if (arg instanceof Element) {\n            return arg.outerHTML;\n          }\n          return typeof arg === 'object' \n            ? JSON.stringify(arg, null, 2)\n            : '\"' + String(arg) + '\"';\n        })\n        .join(' ')\n    }\n\n    for (const level of ['log', 'error', 'warn']) {\n      fakeConsole[level] = console[level];\n      console[level] = (...args) => {\n        fakeConsole[level](...args);\n        window.parent.postMessage({ event: 'LOG', level, args: args }, '*');\n      }\n    }\n\n    window.onerror = function (e, ...args) {\n      window.parent.postMessage({ event: 'ERROR', level: 'error', args: args }, '*');\n    };\n  ",e.head.appendChild(t),e},w={"urn:default":{name:"index.html",value:"<html>\n\t<body>\n\t\n\t</body>\n\n\t<script>\n\t// write some code here\n\t<\/script>\n</html>"}},O=function(e){var t=e.active?"text-white border-b-2":"hover:bg-gray-500 italic text-green-300";return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.b,{id:"file_".concat(e.children),children:Object(x.jsx)("button",{draggable:!0,onClick:function(){return e.onToggle(e.value)},className:"text-xs font-semibold ".concat(t," px-4 block focus:outline-none border-white divide-x divide-light-blue-400 h-full"),children:e.children})}),Object(x.jsxs)(b.a,{hideOnLeave:!0,id:"file_".concat(e.children),className:"bg-gray-800 text-gray-200 cursor-pointer py-2 w-40 shadow-md text-sm z-50 border-2 border-gray-600",children:[Object(x.jsx)(b.c,{className:"px-5 py-1 hover:bg-gray-500",onClick:function(){return e.onAction("delete",e.value)},children:"Delete"}),Object(x.jsx)(b.c,{className:"px-5 py-1 hover:bg-gray-500",onClick:function(){return e.onAction("rename",e.value)},children:"Rename"})]})]})},y=function(e){var t=e.onNewFile,n=Object(r.useState)(!1),a=Object(i.a)(n,2),l=a[0],c=a[1],o=Object(r.useState)(""),s=Object(i.a)(o,2),u=s[0],d=s[1],f=Object(r.useRef)();return Object(x.jsx)("button",{onClick:function(){c(!0),d("")},className:"text-xs font-semibold px-1 block bg-gray-700 ".concat(!l&&"hover:bg-gray-500"," focus:outline-none border-t border-l border-r border-gray-600"),children:l?Object(x.jsx)("div",{className:"flex flex-row justify-center text-gray-300",children:Object(x.jsx)("input",{className:"bg-transparent text-sm px-1 mx-1 focus:outline-none",ref:f,autoFocus:!0,spellCheck:!1,placeholder:"Untitled",onChange:function(e){d(e.target.value)},onAbort:function(){return console.log("Abort")},onKeyUp:function(e){"Enter"===e.code&&f.current.blur(),"Escape"===e.code&&(c(!1),d(""))},onBlur:function(){u&&(t(u),c(!1))}})}):Object(x.jsxs)("div",{className:"flex flex-row justify-center text-gray-300 px-3 italic",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:Object(x.jsx)("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})}),Object(x.jsx)("span",{children:"New"})]})})},N=function(e){var t=e.split("."),n=t[t.length-1];return n.includes("js")?"text/javascript":n.includes("css")?"text/css":n.includes("html")?"text/html":void 0},S=function(e){var t=e.split("."),n=t[t.length-1];return n.includes("js")?"javascript":n.includes("css")?"css":n.includes("html")?"html":void 0};var k=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useRef)(),a=Object(r.useState)([]),l=Object(i.a)(a,2),c=l[0],j=l[1],m=Object(r.useState)({}),b=Object(i.a)(m,2),k=b[0],M=b[1],C=Object(r.useState)(),R=Object(i.a)(C,2),E=R[0],z=R[1],L=Object(r.useState)({}),B=Object(i.a)(L,2),F=B[0],A=B[1],I=Object(r.useState)(!1),J=Object(i.a)(I,2),T=J[0],H=J[1],U=Object(r.useState)(!1),V=Object(i.a)(U,2),D=V[0],P=V[1],_=Object(r.useState)(),G=Object(i.a)(_,2),K=G[0],W=G[1];Object(r.useLayoutEffect)((function(){var e=function(e){"LOG"===e.data.event&&j((function(t){return[{method:e.data.level,data:e.data.args}].concat(Object(s.a)(t))})),"ERROR"===e.data.event&&j((function(t){return[{method:"script_err",data:e.data.args}].concat(Object(s.a)(t))}))};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[]),Object(r.useEffect)((function(){D&&t.current.setModel(n.current.editor.getModel(K))}),[D,K]);var q=function(e,t){if("delete"===e){n.current.editor.getModels().forEach((function(e){e.uri===t&&e.dispose()}));var r=Object(o.a)({},k);delete r[t],M(r)}},Q=Object(r.useMemo)((function(){return c.map((function(e){return"script_err"===e.method?{method:"error",data:["(Line ".concat(e.data[1]," ").concat(F[e.data[0]],") ").concat(e.data[3])]}:e}))}),[c,F]),X=function(e){W(e)};return Object(x.jsxs)("div",{className:"h-screen w-screen flex",children:[Object(x.jsx)(v,{actions:{onRun:function(){var e=n.current.editor.getModel(K).getValue(),t={};n.current.editor.getModels().forEach((function(e){null!=k[e.uri]&&(t[k[e.uri].name]=e.getValue())})),j([]);var r=function(e,t){var n=(new DOMParser).parseFromString(e,"text/html"),r=n.getElementsByTagName("head")[0];n=p(n);for(var a={imports:{}},l={},c=0,o=Object.keys(t);c<o.length;c++){var s=o[c],i=new Blob([t[s]],{type:N(s)}),u=URL.createObjectURL(i);a.imports[s]=u,a.imports["~/".concat(s)]=u,l["".concat(u)]=s}var d=n.createElement("script");return d.type="importmap",d.innerHTML=JSON.stringify(a,null,4),r.appendChild(d),{page:n.documentElement.outerHTML,urls:l}}(e,t),a=r.page,l=r.urls;z(a),A(l)},onExport:function(){var e;try{e=JSON.parse(localStorage.getItem("jsplay-cache")||"{}")}catch(r){e={}}var t={files:e,playmap:{version:1}},n=document.createElement("a");n.href=URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"text/plain"})),n.download="proj.playmap",n.click()},onImport:function(){var e=document.createElement("input");e.type="file",e.click(),e.onchange=function(t){var n=new FileReader;n.readAsText(e.files[0],"utf-8"),n.onload=function(e){try{var t=JSON.parse(e.target.result);t.playmap&&t.playmap.version?(localStorage.setItem("jsplay-cache",JSON.stringify(t.files)),window.location.reload()):alert("Invalid playmap file")}catch(n){alert("Invalid playmap file")}}}}}}),Object(x.jsx)("div",{className:"flex flex-col w-full h-full",children:Object(x.jsx)("div",{class:"flex-grow flex flex-row border-gray-600 border-l-2 max-h-screen",children:Object(x.jsxs)(h.a,{split:"vertical",onResizeStart:function(){return H(!0)},onResizeEnd:function(e){console.log(e),H(!1)},children:[Object(x.jsxs)(h.a,{split:"horizontal",className:"max-h-full",children:[Object(x.jsx)(g.a,{initialSize:"90%",children:Object(x.jsxs)("div",{className:"flex flex-col h-full",children:[Object(x.jsxs)("nav",{style:{minHeight:"2.5rem"},className:"flex flex-col w-full overflow-x-scroll sm:flex-row h-10 px-4 pt-1 bg-gray-800",children:[Object.keys(k).map((function(e){return Object(x.jsx)(O,{onAction:q,onToggle:X,value:e,active:K===e,children:k[e].name},e)})),Object(x.jsx)(y,{onNewFile:function(e){var r="urn:".concat(Object(d.a)()),a=n.current.editor.createModel("// this is a dummy file",S(e),r);t.current.setModel(a),M((function(t){var n=Object(o.a)({},t);return n[r]={value:"// this is a dummy file",name:e},n})),W(r)}})]}),Object(x.jsx)(u.a,{theme:"vs-dark",className:"flex-grow w-full",language:"html",ref:t,defaultValue:"",onMount:function(e,r){t.current=e,n.current=r;var a=JSON.parse(localStorage.getItem("jsplay-cache"))||w,l={},c=null;Object.keys(a).forEach((function(e){n.current.editor.createModel(a[e].value,S(a[e].name),e),l[e]=a[e],null==c&&(c=e)})),M(l),n.current.languages.typescript.javascriptDefaults.setEagerModelSync(!0),P(!0),W(c)},onChange:function(e,t){var n=Object(o.a)({},k);n[K].value=e,localStorage.setItem("jsplay-cache",JSON.stringify(n))}})]})}),Object(x.jsx)(g.a,{initialSize:"10%",minSize:"10%",maxSize:"40%",children:Object(x.jsx)("div",{class:"px-3 overflow-scroll h-full bg-gray-800 border-t-2 border-gray-600 font-mono",children:Object(x.jsx)(f.Console,{logs:Q,variant:"dark"})})})]}),Object(x.jsx)(g.a,{initialSize:"50%",maxSize:"60%",minSize:"30%",children:Object(x.jsx)("iframe",{className:"w-full h-full border-gray-600 ".concat(T?"pointer-events-none":""),title:"Code Preview",srcDoc:E,referrerPolicy:"origin",width:"100%",ref:e,allowFullScreen:!0,allow:"midi; geolocation; microphone; camera; display-capture; encrypted-media;",sandbox:"allow-modals allow-forms allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation allow-downloads"})})]})})})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,158)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,l=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),l(e),c(e)}))};c.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(k,{})}),document.getElementById("root")),M()},61:function(e,t,n){}},[[154,1,2]]]);
//# sourceMappingURL=main.9567492a.chunk.js.map