{"version":3,"sources":["components/Sidebar.js","App.js","reportWebVitals.js","index.js"],"names":["Sidebar","actions","className","href","xmlns","fill","viewBox","stroke","d","onClick","onRun","onImport","strokeWidth","strokeLinecap","strokeLinejoin","onExport","fillRule","clipRule","injectLoggingControl","doc","logScript","createElement","innerHTML","head","appendChild","defaultCached","name","value","Tab","props","color","active","id","children","draggable","onToggle","hideOnLeave","onAction","NewFileTab","onNewFile","useState","editing","setEditing","setValue","inputRef","useRef","ref","autoFocus","spellCheck","placeholder","onChange","e","target","onAbort","console","log","onKeyUp","code","current","blur","onBlur","class","getFileMimeType","filename","parts","split","ext","length","includes","getFileLanguage","App","iframeRef","editorRef","monacoRef","logs","setLogs","files","setFiles","iframeCode","setIframeCode","savedFiles","setSavedFiles","resizing","setResizing","isEditorReady","setIsEditorReady","currentModel","setCurrentModel","useLayoutEffect","onMessage","data","event","l","method","level","args","window","addEventListener","removeEventListener","useEffect","setModel","editor","getModel","onTabAction","action","getModels","forEach","m","uri","dispose","cloned","cleanedLogs","useMemo","map","setCurrentTab","f","getValue","valuesMap","html","DOMParser","parseFromString","getElementsByTagName","importsJson","imports","blobNames","Object","keys","file","bb","Blob","type","dataUrl","URL","createObjectURL","importMap","JSON","stringify","page","documentElement","outerHTML","urls","injectDependenciesImportMap","allScripts","parse","localStorage","getItem","err","exported","playmap","version","link","document","download","click","upload","onchange","reader","FileReader","readAsText","onload","ff","result","setItem","location","reload","alert","onResizeStart","onResizeEnd","initialSize","style","minHeight","urn","uuidv4","createModel","clone","theme","language","defaultValue","onMount","monaco","cachedFiles","filesObj","startFile","fileKey","languages","typescript","javascriptDefaults","setEagerModelSync","minSize","maxSize","variant","title","srcDoc","referrerPolicy","width","allowFullScreen","allow","sandbox","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9567492a.chunk.js","sourcesContent":["import React from \"react\";\n\nexport const Sidebar = ({ actions }) => {\n  return (\n    <aside className=\"flex flex-col items-center bg-gray-800 text-gray-200 shadow h-full\">\n      <div className=\"h-16 w-16 flex items-center \">\n        <a className=\"h-6 w-6 mx-auto text-green-400\" href=\"/\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-6 w-6\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              stroke-width=\"2\"\n              d=\"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n            />\n          </svg>\n        </a>\n      </div>\n\n      <div className=\"h-16 flex items-center w-16 hover:bg-gray-600\">\n        <button\n          className=\"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-600 hover:text-green-400 focus:outline-none\"\n          onClick={actions.onRun}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </button>\n      </div>\n\n      {/* <div className=\"h-16 flex items-center w-16 hover:bg-gray-600\">\n        <button className=\"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-600 hover:text-green-400 focus:outline-none\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </button>\n      </div> */}\n\n      {/* <div className=\"h-16 flex items-center w-16 hover:bg-gray-600\">\n        <button className=\"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-600 hover:text-green-400 focus:outline-none\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\" />\n          </svg>\n        </button>\n      </div> */}\n\n      <div className=\"h-16 flex items-center w-16 hover:bg-gray-600\">\n        <button\n          className=\"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-600 hover:text-green-400 focus:outline-none\"\n          onClick={actions.onImport}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n            strokeWidth={2}\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"\n            />\n          </svg>\n        </button>\n      </div>\n\n      <div className=\"h-16 flex items-center w-16 hover:bg-gray-600\">\n        <button\n          className=\"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-600 hover:text-green-400 focus:outline-none\"\n          onClick={actions.onExport}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fillRule=\"evenodd\"\n              d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\"\n              clipRule=\"evenodd\"\n            />\n          </svg>\n        </button>\n      </div>\n\n      <div className=\"h-16 flex items-center w-16 hover:bg-gray-600\">\n        <button className=\"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-600 hover:text-green-400 focus:outline-none\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fillRule=\"evenodd\"\n              d=\"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z\"\n              clipRule=\"evenodd\"\n            />\n          </svg>\n        </button>\n      </div>\n\n      <div className=\"mt-auto h-16 flex items-center w-full\">\n        <button className=\"h-16 mx-auto flex justify-center items-center w-full hover:bg-gray-700 focus:outline-none\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </button>\n      </div>\n    </aside>\n  );\n};\n","import React, {\n  useRef,\n  useState,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n} from \"react\";\nimport Editor from \"@monaco-editor/react\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { Console } from \"console-feed\";\nimport SplitPane from \"react-split-pane\";\nimport Pane from \"react-split-pane/lib/Pane\";\nimport { ContextMenuTrigger, ContextMenu, MenuItem } from \"react-contextmenu\";\n\nimport { Sidebar } from \"./components/Sidebar\";\n\n/*\nTODO:\n- fix console logs\n- fix pane dragging\n- fix code injection with data url\n- setup code saving with firebase\n\n** import maps for supporting scripts modules\n-> fetch all module scripts that have a src attribute\n-> get the contents of that file, generate data url\n-> construct importmap\n-> inject importmap \n-> remove all previous script tags\n\n*/\n\nconst injectLoggingControl = (doc) => {\n  const script = `\n    const fakeConsole = {};\n    function formatArgs(args) {\n      return args\n        .map((arg) => {\n          if (arg instanceof Element) {\n            return arg.outerHTML;\n          }\n          return typeof arg === 'object' \n            ? JSON.stringify(arg, null, 2)\n            : '\"' + String(arg) + '\"';\n        })\n        .join(' ')\n    }\n\n    for (const level of ['log', 'error', 'warn']) {\n      fakeConsole[level] = console[level];\n      console[level] = (...args) => {\n        fakeConsole[level](...args);\n        window.parent.postMessage({ event: 'LOG', level, args: args }, '*');\n      }\n    }\n\n    window.onerror = function (e, ...args) {\n      window.parent.postMessage({ event: 'ERROR', level: 'error', args: args }, '*');\n    };\n  `;\n\n  var logScript = doc.createElement(\"script\");\n  logScript.innerHTML = script;\n  doc.head.appendChild(logScript);\n  return doc;\n};\n\n/**\n * Build an importmap, injecting all the dependencies as data URL's\n * @param {*} html \n * @param {*} files \n * @returns \n * \n<script type=\"importmap\">\n{\n  \"imports\": {\n    \"moment\": \"/node_modules/moment/src/moment.js\",\n    \"lodash\": \"/node_modules/lodash-es/lodash.js\"\n  }\n}\n</script>\n */\nconst injectDependenciesImportMap = (html, files) => {\n  var parser = new DOMParser();\n  var doc = parser.parseFromString(html, \"text/html\");\n  var head = doc.getElementsByTagName(\"head\")[0];\n  doc = injectLoggingControl(doc);\n\n  let importsJson = { imports: {} };\n  let blobNames = {};\n  for (let file of Object.keys(files)) {\n    const bb = new Blob([files[file]], { type: getFileMimeType(file) });\n    const dataUrl = URL.createObjectURL(bb);\n    importsJson.imports[file] = dataUrl;\n    importsJson.imports[`~/${file}`] = dataUrl;\n    blobNames[`${dataUrl}`] = file;\n  }\n\n  const importMap = doc.createElement(\"script\");\n  importMap.type = \"importmap\";\n  importMap.innerHTML = JSON.stringify(importsJson, null, 4);\n  head.appendChild(importMap);\n\n  return {\n    page: doc.documentElement.outerHTML,\n    urls: blobNames,\n  };\n};\n\nconst injectDependencies = (html, files) => {\n  var parser = new DOMParser();\n  var doc = parser.parseFromString(html, \"text/html\");\n  doc = injectLoggingControl(doc);\n  var scripts = doc.getElementsByTagName(\"script\");\n  for (let i = 0; i < scripts.length; i++) {\n    const srcPath = scripts[i].src.split(\"/\");\n    if (srcPath.length > 1) {\n      const src = srcPath[srcPath.length - 1];\n      let newScript = document.createElement(\"script\");\n      newScript.innerHTML = files[src];\n      scripts[i].replaceWith(newScript);\n    }\n  }\n\n  return doc.documentElement.outerHTML;\n};\n\nconst defaultCached = {\n  \"urn:default\": {\n    name: \"index.html\",\n    value:\n      \"<html>\\n\" +\n      \"\\t<body>\\n\\t\\n\\t\" +\n      \"</\" +\n      \"body>\\n\\n\" +\n      \"\\t<script>\\n\\t// write some code here\" +\n      \"\\n\\t</\" +\n      \"script>\\n\" +\n      \"</html>\",\n  },\n};\n\nconst Tab = (props) => {\n  const color = props.active\n    ? \"text-white border-b-2\"\n    : \"hover:bg-gray-500 italic text-green-300\";\n  return (\n    <>\n      <ContextMenuTrigger id={`file_${props.children}`}>\n        <button\n          draggable={true}\n          onClick={() => props.onToggle(props.value)}\n          className={`text-xs font-semibold ${color} px-4 block focus:outline-none border-white divide-x divide-light-blue-400 h-full`}\n        >\n          {props.children}\n        </button>\n      </ContextMenuTrigger>\n      <ContextMenu\n        hideOnLeave={true}\n        id={`file_${props.children}`}\n        className=\"bg-gray-800 text-gray-200 cursor-pointer py-2 w-40 shadow-md text-sm z-50 border-2 border-gray-600\"\n      >\n        <MenuItem\n          className=\"px-5 py-1 hover:bg-gray-500\"\n          onClick={() => props.onAction(\"delete\", props.value)}\n        >\n          Delete\n        </MenuItem>\n        <MenuItem\n          className=\"px-5 py-1 hover:bg-gray-500\"\n          onClick={() => props.onAction(\"rename\", props.value)}\n        >\n          Rename\n        </MenuItem>\n      </ContextMenu>\n    </>\n  );\n};\n\nconst NewFileTab = ({ onNewFile }) => {\n  const [editing, setEditing] = useState(false);\n  const [value, setValue] = useState(\"\");\n  const inputRef = useRef();\n\n  const updateValue = (e) => {\n    setValue(e.target.value);\n  };\n\n  const onKeyPress = (e) => {\n    if (e.code === \"Enter\") inputRef.current.blur();\n    if (e.code === \"Escape\") {\n      setEditing(false);\n      setValue(\"\");\n    }\n  };\n\n  const finishEdit = () => {\n    if (value) {\n      onNewFile(value);\n      setEditing(false);\n    }\n  };\n\n  const startEditing = () => {\n    setEditing(true);\n    setValue(\"\");\n  };\n\n  return (\n    <button\n      onClick={startEditing}\n      className={`text-xs font-semibold px-1 block bg-gray-700 ${\n        !editing && \"hover:bg-gray-500\"\n      } focus:outline-none border-t border-l border-r border-gray-600`}\n    >\n      {editing ? (\n        <div className=\"flex flex-row justify-center text-gray-300\">\n          <input\n            className=\"bg-transparent text-sm px-1 mx-1 focus:outline-none\"\n            ref={inputRef}\n            autoFocus\n            spellCheck={false}\n            placeholder=\"Untitled\"\n            onChange={updateValue}\n            onAbort={() => console.log(\"Abort\")}\n            onKeyUp={onKeyPress}\n            onBlur={finishEdit}\n          />\n        </div>\n      ) : (\n        <div className=\"flex flex-row justify-center text-gray-300 px-3 italic\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            class=\"h-4 w-4\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n          <span>New</span>\n        </div>\n      )}\n    </button>\n  );\n};\n\nconst getFileMimeType = (filename) => {\n  const parts = filename.split(\".\");\n  const ext = parts[parts.length - 1];\n  if (ext.includes(\"js\")) return \"text/javascript\";\n  if (ext.includes(\"css\")) return \"text/css\";\n  if (ext.includes(\"html\")) return \"text/html\";\n};\n\nconst getFileLanguage = (filename) => {\n  const parts = filename.split(\".\");\n  const ext = parts[parts.length - 1];\n  if (ext.includes(\"js\")) return \"javascript\";\n  if (ext.includes(\"css\")) return \"css\";\n  if (ext.includes(\"html\")) return \"html\";\n};\n\nfunction App() {\n  const iframeRef = useRef();\n  const editorRef = useRef();\n  const monacoRef = useRef();\n  // const monaco = useMonaco()\n  const [logs, setLogs] = useState([]);\n  const [files, setFiles] = useState({});\n  const [iframeCode, setIframeCode] = useState();\n  const [savedFiles, setSavedFiles] = useState({});\n  const [resizing, setResizing] = useState(false);\n\n  const [isEditorReady, setIsEditorReady] = useState(false);\n  const [currentModel, setCurrentModel] = useState();\n\n  const handleEditorDidMount = (editor, monaco) => {\n    editorRef.current = editor;\n    monacoRef.current = monaco;\n    const cachedFiles =\n      JSON.parse(localStorage.getItem(\"jsplay-cache\")) || defaultCached;\n    let filesObj = {};\n    let startFile = null;\n    Object.keys(cachedFiles).forEach((fileKey) => {\n      monacoRef.current.editor.createModel(\n        cachedFiles[fileKey].value,\n        getFileLanguage(cachedFiles[fileKey].name),\n        fileKey\n      );\n      filesObj[fileKey] = cachedFiles[fileKey];\n      if (startFile == null) {\n        startFile = fileKey;\n      }\n    });\n\n    setFiles(filesObj);\n\n    monacoRef.current.languages.typescript.javascriptDefaults.setEagerModelSync(\n      true\n    );\n    // monacoRef.current.languages.typescript.javascriptDefaults.setCompilerOptions(\n    //   {\n    //     noLib: true,\n    //     allowNonTsExtensions: true,\n    //   }\n    // );\n\n    setIsEditorReady(true);\n    setCurrentModel(startFile);\n  };\n\n  useLayoutEffect(() => {\n    const onMessage = (e) => {\n      if (e.data.event === \"LOG\") {\n        setLogs((l) => [{ method: e.data.level, data: e.data.args }, ...l]);\n      }\n\n      if (e.data.event === \"ERROR\") {\n        setLogs((l) => [{ method: \"script_err\", data: e.data.args }, ...l]);\n      }\n    };\n    window.addEventListener(\"message\", onMessage);\n\n    return () => {\n      window.removeEventListener(\"message\", onMessage);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (isEditorReady) {\n      editorRef.current.setModel(\n        monacoRef.current.editor.getModel(currentModel)\n      );\n    }\n  }, [isEditorReady, currentModel]);\n\n  const onNewFile = (filename) => {\n    const urn = `urn:${uuidv4()}`;\n    const m = monacoRef.current.editor.createModel(\n      \"// this is a dummy file\",\n      getFileLanguage(filename),\n      urn\n    );\n\n    editorRef.current.setModel(m);\n    setFiles((f) => {\n      let clone = { ...f };\n      clone[urn] = {\n        value: \"// this is a dummy file\",\n        name: filename,\n      };\n      return clone;\n    });\n    setCurrentModel(urn);\n  };\n\n  const onChange = (value, event) => {\n    let clone = { ...files };\n    clone[currentModel].value = value;\n    localStorage.setItem(\"jsplay-cache\", JSON.stringify(clone));\n  };\n\n  const onTabAction = (action, id) => {\n    if (action === \"delete\") {\n      monacoRef.current.editor.getModels().forEach((m) => {\n        if (m.uri === id) {\n          m.dispose();\n        }\n      });\n      let cloned = { ...files };\n      delete cloned[id];\n      setFiles(cloned);\n    }\n  };\n\n  const cleanedLogs = useMemo(() => {\n    return logs.map((l) => {\n      if (l.method === \"script_err\") {\n        return {\n          method: \"error\",\n          data: [`(Line ${l.data[1]} ${savedFiles[l.data[0]]}) ${l.data[3]}`],\n        };\n      } else {\n        return l;\n      }\n    });\n  }, [logs, savedFiles]);\n\n  const onRender = () => {\n    const value = monacoRef.current.editor.getModel(currentModel).getValue();\n    let valuesMap = {};\n    monacoRef.current.editor.getModels().forEach((m) => {\n      if (files[m.uri] != null) {\n        valuesMap[files[m.uri].name] = m.getValue();\n      }\n    });\n    setLogs([]);\n    const { page, urls } = injectDependenciesImportMap(value, valuesMap);\n    setIframeCode(page);\n    setSavedFiles(urls);\n    // setIframeCode(injectDependencies(value, valuesMap));\n  };\n\n  const setCurrentTab = (f) => {\n    // monacoRef.current.editor.getModels().forEach((m) => {\n    //   if (m.language === \"javascript\") {\n    //     monacoRef.current.languages.typescript.javascriptDefaults.addExtraLib(\n    //       m.getValue(),\n    //       m.uri\n    //     );\n    //   }\n    // });\n\n    setCurrentModel(f);\n  };\n\n  const onExport = () => {\n    let allScripts;\n    try {\n      allScripts = JSON.parse(localStorage.getItem(\"jsplay-cache\") || \"{}\");\n    } catch (err) {\n      allScripts = {};\n    }\n\n    const exported = {\n      files: allScripts,\n      playmap: {\n        version: 1,\n      },\n    };\n    const link = document.createElement(\"a\");\n    link.href = URL.createObjectURL(\n      new Blob([JSON.stringify(exported)], { type: \"text/plain\" })\n    );\n    link.download = \"proj.playmap\";\n    link.click();\n  };\n\n  const onImport = () => {\n    const upload = document.createElement(\"input\");\n    upload.type = \"file\";\n    upload.click();\n    upload.onchange = (e) => {\n      var reader = new FileReader();\n      reader.readAsText(upload.files[0], \"utf-8\");\n      reader.onload = (e) => {\n        try {\n          const ff = JSON.parse(e.target.result);\n          if (ff.playmap && ff.playmap.version) {\n            localStorage.setItem(\"jsplay-cache\", JSON.stringify(ff.files));\n            window.location.reload();\n          } else {\n            alert(\"Invalid playmap file\");\n          }\n        } catch (err) {\n          alert(\"Invalid playmap file\");\n        }\n      };\n    };\n  };\n\n  return (\n    <div className=\"h-screen w-screen flex\">\n      <Sidebar\n        actions={{\n          onRun: onRender,\n          onExport: onExport,\n          onImport: onImport,\n        }}\n      />\n      <div className=\"flex flex-col w-full h-full\">\n        {/* <div className=\"p-1 max-h-8 h-8 bg-gray-800 border-b-2 border-gray-600 text-sm flex-grow flex justify-between\">\n          <span></span>\n          <span className=\"text-gray-300 font-semibold\">Loading</span>\n        </div> */}\n        <div class=\"flex-grow flex flex-row border-gray-600 border-l-2 max-h-screen\">\n          <SplitPane\n            split=\"vertical\"\n            onResizeStart={() => setResizing(true)}\n            onResizeEnd={(e) => {\n              console.log(e);\n              setResizing(false);\n            }}\n          >\n            <SplitPane split=\"horizontal\" className=\"max-h-full\">\n              <Pane initialSize=\"90%\">\n                <div className=\"flex flex-col h-full\">\n                  <nav\n                    style={{ minHeight: \"2.5rem\" }}\n                    className=\"flex flex-col w-full overflow-x-scroll sm:flex-row h-10 px-4 pt-1 bg-gray-800\"\n                  >\n                    {Object.keys(files).map((f) => (\n                      <Tab\n                        key={f}\n                        onAction={onTabAction}\n                        onToggle={setCurrentTab}\n                        value={f}\n                        active={currentModel === f}\n                      >\n                        {files[f].name}\n                      </Tab>\n                    ))}\n                    <NewFileTab onNewFile={onNewFile} />\n                  </nav>\n                  <Editor\n                    theme=\"vs-dark\"\n                    className=\"flex-grow w-full\"\n                    language=\"html\"\n                    ref={editorRef}\n                    defaultValue={\"\"}\n                    onMount={handleEditorDidMount}\n                    onChange={onChange}\n                  />\n                </div>\n              </Pane>\n              <Pane initialSize=\"10%\" minSize=\"10%\" maxSize=\"40%\">\n                <div class=\"px-3 overflow-scroll h-full bg-gray-800 border-t-2 border-gray-600 font-mono\">\n                  <Console logs={cleanedLogs} variant=\"dark\" />\n                </div>\n              </Pane>\n            </SplitPane>\n            <Pane initialSize=\"50%\" maxSize=\"60%\" minSize=\"30%\">\n              <iframe\n                className={`w-full h-full border-gray-600 ${\n                  resizing ? \"pointer-events-none\" : \"\"\n                }`}\n                title=\"Code Preview\"\n                srcDoc={iframeCode}\n                referrerPolicy=\"origin\"\n                width=\"100%\"\n                ref={iframeRef}\n                allowFullScreen\n                allow=\"midi; geolocation; microphone; camera; display-capture; encrypted-media;\"\n                sandbox=\"allow-modals allow-forms allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation allow-downloads\"\n              />\n            </Pane>\n          </SplitPane>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}